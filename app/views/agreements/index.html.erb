<h1>Listing agreements</h1>

<table border="1">
  <tr>
    <th>Lendee</th>
    <th>Due Date</th>
    <th>Employee</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @agreements.sort_by! { |k| k.duedate } %>
<% @agreements.each do |agreement| %>
  <% if agreement.major_prob %>
    <tr class="issue">
  <% elsif agreement.has_cost %>
    <tr class="fees">
  <% elsif agreement.duedate < Date.today  %>
    <tr class="overdue">
  <% elsif agreement.is_at_dry %>
    <tr class="dry-clean">
  <% elsif agreement.is_out %>
    <tr class="out">
  <% elsif agreement.is_done %>
    <tr class="complete">
  <% else %>
    <tr>
  <% end %>
    <td><%= agreement.name %></td>
    <td><%= agreement.duedate %></td>
    <td><%= agreement.employee %></td>
    <td><%= link_to 'Show', agreement %></td>
    <td><%= link_to 'Edit', edit_agreement_path(agreement) %></td>
    <td><%= link_to 'Destroy', agreement, :method => :delete, :data => { :confirm => 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Agreement', new_agreement_path %>
